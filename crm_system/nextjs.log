
> crm_system@0.1.0 dev
> next dev --turbopack --hostname 0.0.0.0 --port 3000

 ⚠ Warning: Found multiple lockfiles. Selecting /Users/charlie.ppy/package-lock.json.
   Consider removing the lockfiles at:
   * /Users/charlie.ppy/Desktop/github_CRM/CRM_system_all/crm_system/package-lock.json

   ▲ Next.js 15.4.5 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://0.0.0.0:3000

 ✓ Starting...
 ✓ Compiled middleware in 77ms
 ✓ Ready in 1002ms
 ○ Compiling /api/financial-records ...
 ✓ Compiled /api/financial-records in 544ms
 GET /api/financial-records 200 in 1616ms
 ○ Compiling /financial_management ...
 ✓ Compiled /financial_management in 1062ms
 GET /financial_management 200 in 1212ms
 GET /financial_management 200 in 66ms
 ⚠ Cross origin request detected from www.in_crm_system.com to /_next/* resource. In a future major version of Next.js, you will need to explicitly configure "allowedDevOrigins" in next.config to allow this.
Read more: https://nextjs.org/docs/app/api-reference/config/next-config-js/allowedDevOrigins
 GET /api/financial-records 200 in 62ms
 GET /api/auth/me 200 in 208ms
 ✓ Compiled /api/auth/me in 238ms
 GET /_next/webpack-hmr 404 in 279ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 380ms
 GET /financial_management 200 in 58ms
 GET /api/auth/me 200 in 52ms
 GET /_next/webpack-hmr 404 in 53ms
 GET /api/financial-records 200 in 65ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 254ms
 GET /financial_management 200 in 53ms
 GET /financial_management 200 in 46ms
 GET /financial_management/report 200 in 350ms
 GET / 200 in 359ms
 ✓ Compiled / in 391ms
 GET /financial_management/by_name 200 in 417ms
 ⚠ Cross origin request detected from crm.local to /_next/* resource. In a future major version of Next.js, you will need to explicitly configure "allowedDevOrigins" in next.config to allow this.
Read more: https://nextjs.org/docs/app/api-reference/config/next-config-js/allowedDevOrigins
 GET /api/auth/me 200 in 40ms
 GET /_next/webpack-hmr 404 in 41ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 245ms
 ✓ Compiled /attendance in 126ms
 GET /attendance 200 in 146ms
 ✓ Compiled /api/attendance/accessible in 52ms
 GET /api/attendance/accessible 200 in 86ms
 GET /api/attendance/accessible 200 in 27ms
 GET /financial_management 200 in 44ms
 GET /api/financial-records 200 in 42ms
 GET /api/financial-records 200 in 41ms
 GET /financial_management/by_name 200 in 42ms
 GET /api/financial-records 200 in 41ms
 GET /api/financial-records? 200 in 42ms
 GET /api/financial-records 200 in 39ms
 GET /api/financial-records? 200 in 39ms
 GET /financial_management/report 200 in 41ms
 GET /api/financial-records 200 in 78ms
 GET /api/financial-records 200 in 40ms
 ✓ Compiled /financial_management/add in 117ms
 GET /financial_management/add 200 in 138ms
 ✓ Compiled /trainer_management/profile in 127ms
 GET /trainer_management/profile 200 in 147ms
 ✓ Compiled /api/accounts in 48ms
 GET /api/accounts?role=trainer 200 in 82ms
 GET /api/accounts?role=trainer 200 in 32ms
 ✓ Compiled /api/activities/by-trainer in 57ms
(node:8123) [MONGOOSE] Warning: Duplicate schema index on {"trainerId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
 GET /api/activities/by-trainer?trainerId=689318cbb3b09e635ae9f690 200 in 91ms
 GET /api/activities/by-trainer?trainerId=689318cbb3b09e635ae9f690 200 in 27ms
(node:8544) [MONGOOSE] Warning: Duplicate schema index on {"trainerId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
 GET /api/trainer-profile/689318cbb3b09e635ae9f690 200 in 511ms
 GET /api/trainer-profile/689318cbb3b09e635ae9f690 200 in 21ms
(node:8545) [MONGOOSE] Warning: Duplicate schema index on {"trainerId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
 GET / 200 in 40ms
 GET /api/financial-records? 200 in 52ms
 GET /api/financial-records?memberName=%E9%99%B3%E4%BB%94 200 in 57ms
 GET /api/financial-records?memberName=%E7%81%A3%E4%BB%94 200 in 58ms
 GET /api/financial-records?memberName=%E7%81%A3 200 in 54ms
 GET /api/financial-records? 200 in 56ms
 GET /financial_management/by_name 200 in 41ms
 GET /api/financial-records 200 in 39ms
 GET /api/financial-records? 200 in 39ms
 GET /api/financial-records 200 in 38ms
 GET /api/financial-records? 200 in 39ms
 GET /financial_management/report 200 in 45ms
 GET /api/financial-records 200 in 59ms
 GET /api/financial-records 200 in 38ms
 GET /financial_management/by_name 200 in 29ms
 GET /api/financial-records? 200 in 45ms
 GET /api/financial-records 200 in 46ms
 GET /api/financial-records 200 in 38ms
 GET /api/financial-records? 200 in 48ms
 GET /api/financial-records?memberName=test 200 in 70ms
 GET /api/financial-records?memberName=%E9%99%B3%E4%BB%94 200 in 45ms
 GET /api/financial-records?memberName=test 200 in 42ms
 GET /api/financial-records? 200 in 45ms
 GET /financial_management/report 200 in 30ms
 GET /api/financial-records 200 in 40ms
 GET /api/financial-records 200 in 34ms
 GET /api/financial-records 200 in 57ms
 GET /api/financial-records 200 in 45ms
 GET /api/financial-records 200 in 40ms
 GET /api/financial-records 200 in 51ms
 GET /api/financial-records 200 in 57ms
 GET /api/financial-records 200 in 59ms
 GET /api/financial-records 200 in 51ms
 GET /api/financial-records 200 in 64ms
 GET /financial_management/add 200 in 43ms
 GET /financial_management 200 in 52ms
 GET /api/financial-records 200 in 41ms
 GET /api/financial-records 200 in 36ms
 GET /financial_management/by_name 200 in 41ms
 GET /api/financial-records 200 in 43ms
 GET /api/financial-records? 200 in 46ms
 GET /api/financial-records 200 in 42ms
 GET /api/financial-records? 200 in 44ms
 GET /financial_management/report 200 in 42ms
 GET /api/financial-records 200 in 43ms
 GET /api/financial-records 200 in 37ms
 GET /financial_management/add 200 in 42ms
 GET /financial_management/report 200 in 24ms
 GET /api/financial-records 200 in 38ms
 GET /api/financial-records 200 in 44ms
 GET /api/financial-records 200 in 63ms
 GET /financial_management/by_name 200 in 42ms
 GET /api/financial-records? 200 in 41ms
 GET /api/financial-records 200 in 43ms
 GET /api/financial-records? 200 in 42ms
 GET /api/financial-records 200 in 43ms
 GET /financial_management 200 in 42ms
 GET /api/financial-records 200 in 43ms
 GET /api/financial-records 200 in 36ms
 GET /financial_management/add 200 in 41ms
 GET /financial_management/report 200 in 42ms
 GET /api/financial-records 200 in 39ms
 GET /api/financial-records 200 in 36ms
 GET /api/financial-records 200 in 50ms
 GET /api/financial-records 200 in 38ms
 GET /api/financial-records 200 in 39ms
 GET /api/financial-records 200 in 40ms
 GET /api/financial-records 200 in 55ms
 GET /financial_management/report 200 in 210ms
 GET /api/auth/me 200 in 69ms
 GET /_next/webpack-hmr 404 in 70ms
 GET /api/financial-records 200 in 83ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 265ms
 GET /financial_management 200 in 36ms
 GET /api/financial-records 200 in 38ms
 GET /api/financial-records 200 in 36ms
 GET /financial_management/by_name 200 in 55ms
 GET /api/financial-records 200 in 48ms
 GET /api/financial-records? 200 in 47ms
 GET /api/financial-records? 200 in 45ms
 GET /api/financial-records 200 in 47ms
 GET /financial_management/report 200 in 44ms
 GET /api/financial-records 200 in 44ms
 GET /api/financial-records 200 in 37ms
 GET /financial_management/add 200 in 43ms
 GET /financial_management/report 200 in 41ms
 GET /api/financial-records 200 in 45ms
 GET /api/financial-records 200 in 41ms
 GET /financial_management/by_name 200 in 40ms
 GET /api/financial-records? 200 in 54ms
 GET /api/financial-records 200 in 56ms
 GET /api/financial-records 200 in 44ms
 GET /api/financial-records? 200 in 45ms
 GET /financial_management/report 200 in 42ms
 GET /financial_management/report 200 in 19ms
 GET /api/financial-records 200 in 39ms
 GET /api/financial-records 200 in 34ms
 GET /financial_management/report 200 in 40ms
 GET /api/financial-records 200 in 41ms
 GET /api/financial-records 200 in 36ms
 GET /financial_management/add 200 in 37ms
 GET /financial_management 200 in 40ms
 GET /api/financial-records 200 in 43ms
 GET /api/financial-records 200 in 39ms
 GET /financial_management/report 200 in 38ms
 GET /api/financial-records 200 in 38ms
 GET /api/financial-records 200 in 37ms
 GET /api/financial-records 200 in 46ms
 GET /api/financial-records 200 in 59ms
 GET /api/financial-records 200 in 59ms
 GET /financial_management 200 in 42ms
 GET /api/financial-records 200 in 41ms
 GET /api/financial-records 200 in 39ms
 ✓ Compiled /api/financial-records/[id] in 86ms
Error: Route "/api/financial-records/[id]" used `params.id`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at PUT (src/app/api/financial-records/[id]/route.ts:11:38)
   9 | ) {
  10 |   try {
> 11 |     console.log('開始修改財務記錄...', params.id);
     |                                      ^
  12 |     
  13 |     await connectDB();
  14 |     console.log('數據庫連接成功');
開始修改財務記錄... 689c2d62fa725512a811451d
數據庫連接成功
接收到的修改數據: {
  recordType: 'income',
  memberName: '陳仔',
  item: '課程費用',
  details: '',
  location: '黃大仙',
  unitPrice: 300,
  quantity: 1,
  recordDate: '2025-08-13'
}
Error: Route "/api/financial-records/[id]" used `params.id`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at PUT (src/app/api/financial-records/[id]/route.ts:50:13)
  48 |     // 查找並更新記錄
  49 |     const updatedRecord = await FinancialRecord.findByIdAndUpdate(
> 50 |       params.id,
     |             ^
  51 |       {
  52 |         recordType,
  53 |         memberName,
記錄更新成功: new ObjectId('689c2d62fa725512a811451d')
 PUT /api/financial-records/689c2d62fa725512a811451d 200 in 1054ms
 GET /api/financial-records 200 in 61ms
 GET /attendance 200 in 46ms
 GET /api/attendance/accessible 200 in 48ms
 GET /api/attendance/accessible 200 in 39ms
 ✓ Compiled /attendance/activity_management in 134ms
 GET /attendance/activity_management 200 in 155ms
 GET /api/accounts?role=trainer 200 in 31ms
 ✓ Compiled /api/activities in 60ms
 GET /api/accounts?role=trainer 200 in 48ms
 GET /api/activities 200 in 94ms
 GET /api/activities 200 in 35ms
 ✓ Compiled /attendance/check in 119ms
 GET /attendance/check 200 in 142ms
 ✓ Compiled /api/attendance/by-date in 54ms
 GET /api/attendance/by-date?date=2025-08-13 200 in 114ms
 GET /api/attendance/by-date?date=2025-08-13 200 in 54ms
 ✓ Compiled /attendance/add in 106ms
 GET /attendance/add 200 in 126ms
 GET /api/activities 200 in 21ms
 GET /api/activities 200 in 28ms
 ✓ Compiled /attendance/by_name in 125ms
 GET /attendance/by_name 200 in 146ms
 GET /api/attendance/accessible 200 in 29ms
 GET /api/attendance/accessible 200 in 40ms
 ✓ Compiled /member_management/profile in 130ms
 GET /member_management/profile 200 in 151ms
 GET /api/accounts?role=member 200 in 29ms
 GET /api/accounts?role=member 200 in 27ms
 ✓ Compiled /api/attendance/by-member in 52ms
 GET /api/attendance/by-member?name=%E6%9E%97%E5%A4%AA&contact=50000003 200 in 77ms
 GET /api/attendance/by-member?name=%E6%9E%97%E5%A4%AA&contact=50000003 200 in 22ms
 GET /trainer_management/profile 200 in 40ms
 GET /api/accounts?role=trainer 200 in 26ms
 GET /api/accounts?role=trainer 200 in 35ms
 GET /api/activities/by-trainer?trainerId=689318cbb3b09e635ae9f690 200 in 35ms
 GET /api/trainer-profile/689318cbb3b09e635ae9f690 200 in 37ms
 GET /api/trainer-profile/689318cbb3b09e635ae9f690 200 in 28ms
 GET /api/activities/by-trainer?trainerId=689318cbb3b09e635ae9f690 200 in 35ms
(node:9810) [MONGOOSE] Warning: Duplicate schema index on {"trainerId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
 GET /api/activities/by-trainer?trainerId=68930b69b3b09e635ae9f4e6 200 in 38ms
 GET /api/trainer-profile/68930b69b3b09e635ae9f4e6 404 in 43ms
(node:9811) [MONGOOSE] Warning: Duplicate schema index on {"trainerId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
 GET /api/trainer-profile/689318cbb3b09e635ae9f690 200 in 38ms
 GET /api/activities/by-trainer?trainerId=689318cbb3b09e635ae9f690 200 in 43ms
(node:9812) [MONGOOSE] Warning: Duplicate schema index on {"trainerId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
 GET /api/trainer-profile/68930b69b3b09e635ae9f4e6 404 in 35ms
 GET /api/activities/by-trainer?trainerId=68930b69b3b09e635ae9f4e6 200 in 43ms
(node:9813) [MONGOOSE] Warning: Duplicate schema index on {"trainerId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
 GET /financial_management 200 in 42ms
 GET /api/financial-records 200 in 44ms
 GET /api/financial-records 200 in 37ms
 GET /financial_management/by_name 200 in 35ms
 GET /api/financial-records 200 in 59ms
 GET /api/financial-records? 200 in 59ms
 GET /api/financial-records? 200 in 58ms
 GET /api/financial-records 200 in 61ms
 GET /financial_management/report 200 in 35ms
 GET /api/financial-records 200 in 45ms
 GET /api/financial-records 200 in 38ms
 GET /financial_management/report 200 in 219ms
 GET /api/auth/me 200 in 49ms
 GET /_next/webpack-hmr 404 in 51ms
 GET /api/financial-records 200 in 62ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 255ms
 GET /api/financial-records 200 in 45ms
 GET /api/financial-records 200 in 44ms
 GET /financial_management/report 200 in 88ms
 GET /api/auth/me 200 in 68ms
 GET /_next/webpack-hmr 404 in 71ms
 GET /api/financial-records 200 in 81ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 302ms
 GET /financial_management/add 200 in 43ms
開始創建財務記錄...
數據庫連接成功
接收到的請求體: {
  recordType: 'income',
  memberName: '陳伯',
  item: '飲食費用',
  details: '',
  location: '黃大仙',
  unitPrice: 100,
  quantity: 1,
  recordDate: '2025-08-13T07:24',
  createdBy: '689308eab3b09e635ae9f4c0'
}
解析後的字段: {
  recordType: 'income',
  memberName: '陳伯',
  item: '飲食費用',
  details: '',
  location: '黃大仙',
  unitPrice: 100,
  quantity: 1,
  recordDate: '2025-08-13T07:24',
  createdBy: '689308eab3b09e635ae9f4c0'
}
所有驗證通過，開始創建記錄...
記錄對象創建成功: {
  recordType: 'income',
  memberName: '陳伯',
  item: '飲食費用',
  details: '',
  location: '黃大仙',
  unitPrice: 100,
  quantity: 1,
  recordDate: 2025-08-12T23:24:00.000Z,
  createdBy: new ObjectId('689308eab3b09e635ae9f4c0'),
  _id: new ObjectId('689c3dcb2d69a190446b43e4')
}
記錄保存成功，ID: new ObjectId('689c3dcb2d69a190446b43e4')
 POST /api/financial-records 201 in 67ms
 GET /financial_management 200 in 40ms
 GET /api/financial-records 200 in 43ms
 GET /api/financial-records 200 in 43ms
 GET /api/financial-records 200 in 406ms
 GET /api/financial-records 200 in 89ms
 GET /api/financial-records 200 in 43ms
 GET /financial_management 200 in 66ms
 GET /api/auth/me 200 in 52ms
 GET /_next/webpack-hmr 404 in 57ms
 GET /api/financial-records 200 in 67ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 255ms
 GET /financial_management/add 200 in 38ms
開始創建財務記錄...
數據庫連接成功
接收到的請求體: {
  recordType: 'income',
  memberName: '羅太太',
  item: '清潔費用',
  details: '清潔費用',
  location: '石門',
  unitPrice: 300,
  quantity: 2,
  recordDate: '2025-08-13T15:28',
  createdBy: '689308eab3b09e635ae9f4c0'
}
解析後的字段: {
  recordType: 'income',
  memberName: '羅太太',
  item: '清潔費用',
  details: '清潔費用',
  location: '石門',
  unitPrice: 300,
  quantity: 2,
  recordDate: '2025-08-13T15:28',
  createdBy: '689308eab3b09e635ae9f4c0'
}
所有驗證通過，開始創建記錄...
記錄對象創建成功: {
  recordType: 'income',
  memberName: '羅太太',
  item: '清潔費用',
  details: '清潔費用',
  location: '石門',
  unitPrice: 300,
  quantity: 2,
  recordDate: 2025-08-13T07:28:00.000Z,
  createdBy: new ObjectId('689308eab3b09e635ae9f4c0'),
  _id: new ObjectId('689c3ea32d69a190446b43f9')
}
記錄保存成功，ID: new ObjectId('689c3ea32d69a190446b43f9')
 POST /api/financial-records 201 in 54ms
 GET /financial_management 200 in 31ms
 GET /api/financial-records 200 in 43ms
 GET /api/financial-records 200 in 41ms
 GET /financial_management 200 in 65ms
 GET /api/auth/me 200 in 60ms
 GET /_next/webpack-hmr 404 in 62ms
 GET /api/financial-records 200 in 72ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 238ms
 GET /financial_management/by_name 200 in 41ms
 GET /api/financial-records? 200 in 44ms
 GET /api/financial-records 200 in 45ms
 GET /api/financial-records 200 in 39ms
 GET /api/financial-records? 200 in 42ms
 GET /financial_management/report 200 in 45ms
 GET /api/financial-records 200 in 56ms
 GET /api/financial-records 200 in 39ms
 GET /financial_management/add 200 in 34ms
 GET /financial_management 200 in 41ms
 GET /api/financial-records 200 in 46ms
 GET /api/financial-records 200 in 39ms
 GET / 200 in 107ms
 GET /api/auth/me 200 in 52ms
 GET /_next/webpack-hmr 404 in 53ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 250ms
 GET /financial_management/report 200 in 77ms
 GET /api/auth/me 200 in 52ms
 GET /_next/webpack-hmr 404 in 52ms
 GET /api/financial-records 200 in 72ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 236ms
 GET /financial_management 200 in 47ms
 GET /api/auth/me 200 in 45ms
 GET /api/financial-records 200 in 57ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 239ms
 GET /_next/webpack-hmr 404 in 42ms
 HEAD / 200 in 152ms
 HEAD / 200 in 50ms
 GET / 200 in 63ms
 GET /api/auth/me 200 in 54ms
 GET /_next/webpack-hmr 404 in 58ms
 GET / 200 in 58ms
 GET /api/auth/me 200 in 44ms
 GET /_next/webpack-hmr 404 in 41ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 228ms
 GET / 200 in 61ms
 GET /api/auth/me 200 in 44ms
 GET /_next/webpack-hmr 404 in 47ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 247ms
 GET / 200 in 61ms
 GET /api/auth/me 200 in 40ms
 GET /_next/webpack-hmr 404 in 43ms
 GET / 200 in 67ms
 GET /api/auth/me 200 in 69ms
 GET /_next/webpack-hmr 404 in 72ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 248ms
 GET /attendance 200 in 43ms
 GET /api/attendance/accessible 200 in 38ms
 GET /api/attendance/accessible 200 in 30ms
 GET / 200 in 65ms
 GET /api/auth/me 401 in 38ms
 ✓ Compiled /login in 339ms
 GET /login?redirect=%2F 200 in 362ms
 ⚠ Cross origin request detected from 172.16.18.161 to /_next/* resource. In a future major version of Next.js, you will need to explicitly configure "allowedDevOrigins" in next.config to allow this.
Read more: https://nextjs.org/docs/app/api-reference/config/next-config-js/allowedDevOrigins
 GET /_next/webpack-hmr 404 in 45ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 236ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 222ms
 ✓ Compiled /api/auth/login in 66ms
 POST /api/auth/login 200 in 348ms
 GET / 200 in 28ms
 GET / 200 in 34ms
 GET / 200 in 38ms
 GET /attendance 200 in 42ms
 GET /api/attendance/accessible 200 in 40ms
 GET /api/attendance/accessible 200 in 44ms
 GET /attendance/activity_management 200 in 56ms
 GET /api/activities 200 in 36ms
 GET /api/accounts?role=trainer 200 in 39ms
 GET /api/activities 200 in 40ms
 GET /api/accounts?role=trainer 200 in 39ms
 GET /attendance/check 200 in 35ms
 GET /api/attendance/by-date?date=2025-08-13 200 in 39ms
 GET /api/attendance/by-date?date=2025-08-13 200 in 39ms
 GET /api/attendance/by-date?date=2025-08-12 200 in 49ms
 GET /api/attendance/by-date?date=2025-08-11 200 in 43ms
 GET /api/attendance/by-date?date=2025-08-08 200 in 45ms
 GET /attendance/add 200 in 44ms
 GET /api/activities 200 in 32ms
 GET /api/activities 200 in 31ms
 GET /attendance/by_name 200 in 41ms
 GET /api/attendance/accessible 200 in 38ms
 GET /api/attendance/accessible 200 in 38ms
 GET /api/activities 200 in 47ms
 GET /api/activities 200 in 46ms
 GET /attendance/by_name 200 in 43ms
 GET /api/attendance/accessible 200 in 37ms
 GET /api/attendance/accessible 200 in 39ms
 GET /member_management/profile 200 in 40ms
 GET /api/accounts?role=member 200 in 36ms
 GET /api/accounts?role=member 200 in 39ms
 GET /api/attendance/by-member?name=%E6%9E%97%E5%A4%AA&contact=50000003 200 in 25ms
 GET /api/attendance/by-member?name=%E6%9E%97%E5%A4%AA&contact=50000003 200 in 26ms
 GET /trainer_management/profile 200 in 43ms
 GET /api/accounts?role=trainer 200 in 29ms
 GET /api/accounts?role=trainer 200 in 28ms
 GET /api/trainer-profile/689318cbb3b09e635ae9f690 200 in 37ms
 GET /api/activities/by-trainer?trainerId=689318cbb3b09e635ae9f690 200 in 42ms
 GET /api/trainer-profile/689318cbb3b09e635ae9f690 200 in 42ms
 GET /api/activities/by-trainer?trainerId=689318cbb3b09e635ae9f690 200 in 46ms
(node:19060) [MONGOOSE] Warning: Duplicate schema index on {"trainerId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
 GET /financial_management 200 in 44ms
 GET /api/financial-records 200 in 42ms
 GET /api/financial-records 200 in 38ms
 GET /financial_management/by_name 200 in 41ms
 GET /api/financial-records? 200 in 54ms
 GET /api/financial-records 200 in 56ms
 GET /api/financial-records 200 in 53ms
 GET /api/financial-records? 200 in 159ms
 GET /api/financial-records?memberName=%E5%BC%B5%E4%B8%89 200 in 55ms
 GET /financial_management/report 200 in 41ms
 GET /api/financial-records 200 in 44ms
 GET /api/financial-records 200 in 41ms
 GET /financial_management/add 200 in 39ms
開始創建財務記錄...
數據庫連接成功
接收到的請求體: {
  recordType: 'income',
  memberName: '張伯伯',
  item: '交通費',
  details: '',
  location: '黃大仙',
  unitPrice: 300,
  quantity: 1,
  recordDate: '2025-08-12T20:07',
  createdBy: '689308eab3b09e635ae9f4c0'
}
解析後的字段: {
  recordType: 'income',
  memberName: '張伯伯',
  item: '交通費',
  details: '',
  location: '黃大仙',
  unitPrice: 300,
  quantity: 1,
  recordDate: '2025-08-12T20:07',
  createdBy: '689308eab3b09e635ae9f4c0'
}
所有驗證通過，開始創建記錄...
記錄對象創建成功: {
  recordType: 'income',
  memberName: '張伯伯',
  item: '交通費',
  details: '',
  location: '黃大仙',
  unitPrice: 300,
  quantity: 1,
  recordDate: 2025-08-12T12:07:00.000Z,
  createdBy: new ObjectId('689308eab3b09e635ae9f4c0'),
  _id: new ObjectId('689c47fd2d69a190446b4474')
}
記錄保存成功，ID: new ObjectId('689c47fd2d69a190446b4474')
 POST /api/financial-records 201 in 58ms
 GET /financial_management 200 in 50ms
 GET /api/financial-records 200 in 40ms
 GET /api/financial-records 200 in 39ms
 GET /financial_management/by_name 200 in 48ms
 GET /api/financial-records 200 in 63ms
 GET /api/financial-records? 200 in 54ms
 GET /api/financial-records 200 in 64ms
 GET /api/financial-records? 200 in 65ms
 GET /financial_management/report 200 in 41ms
 GET /api/financial-records 200 in 45ms
 GET /api/financial-records 200 in 45ms
 GET /financial_management/add 200 in 41ms
 ✓ Compiled /account_management/admin in 223ms
 GET /account_management/admin 200 in 248ms
 GET /api/accounts?role=admin 200 in 23ms
 GET /api/accounts?role=admin 200 in 19ms
 ✓ Compiled /api/accounts/[id] in 36ms
 GET /api/accounts/689308eab3b09e635ae9f4c0 200 in 525ms
 GET /api/accounts/689308eab3b09e635ae9f4c0 200 in 518ms
 ✓ Compiled /account_management/trainer in 133ms
 GET /account_management/trainer 200 in 155ms
 GET /api/accounts?role=trainer 200 in 27ms
 GET /api/accounts?role=trainer 200 in 26ms
 GET /api/accounts/689318cbb3b09e635ae9f690 200 in 24ms
 GET /api/accounts/689318cbb3b09e635ae9f690 200 in 27ms
 ✓ Compiled /account_management/member in 116ms
 GET /account_management/member 200 in 138ms
 GET /api/accounts?role=member 200 in 24ms
 GET /api/accounts?role=member 200 in 25ms
 GET /api/accounts/68945f68f8c8ac066ce45744 200 in 22ms
 GET /api/accounts/68945f68f8c8ac066ce45744 200 in 21ms
 GET / 200 in 44ms
 GET /attendance 200 in 30ms
 GET /api/attendance/accessible 200 in 35ms
 GET /api/attendance/accessible 200 in 32ms
 GET /attendance/activity_management 200 in 59ms
 GET /api/activities 200 in 32ms
 GET /api/accounts?role=trainer 200 in 33ms
 GET /api/activities 200 in 39ms
 GET /api/accounts?role=trainer 200 in 40ms
 GET /attendance/check 200 in 33ms
 GET /api/attendance/by-date?date=2025-08-13 200 in 103ms
 GET /api/attendance/by-date?date=2025-08-13 200 in 30ms
 GET /attendance/add 200 in 24ms
 GET /api/activities 200 in 25ms
 GET /api/activities 200 in 23ms
 GET /attendance/by_name 200 in 41ms
 GET /api/attendance/accessible 200 in 31ms
 GET /api/attendance/accessible 200 in 27ms
 GET /attendance/check 200 in 42ms
 GET /api/attendance/by-date?date=2025-08-13 200 in 32ms
 GET /api/attendance/by-date?date=2025-08-13 200 in 28ms
 GET /member_management/profile 200 in 42ms
 GET /api/accounts?role=member 200 in 101ms
 GET /api/accounts?role=member 200 in 29ms
 GET /api/attendance/by-member?name=%E6%9E%97%E5%A4%AA&contact=50000003 200 in 31ms
 GET /api/attendance/by-member?name=%E6%9E%97%E5%A4%AA&contact=50000003 200 in 20ms
 GET /trainer_management/profile 200 in 33ms
 GET /api/accounts?role=trainer 200 in 28ms
 GET /api/accounts?role=trainer 200 in 28ms
 GET /api/activities/by-trainer?trainerId=689318cbb3b09e635ae9f690 200 in 29ms
 GET /api/trainer-profile/689318cbb3b09e635ae9f690 200 in 33ms
 GET /api/activities/by-trainer?trainerId=689318cbb3b09e635ae9f690 200 in 24ms
 GET /api/trainer-profile/689318cbb3b09e635ae9f690 200 in 44ms
(node:19516) [MONGOOSE] Warning: Duplicate schema index on {"trainerId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
 GET /financial_management 200 in 40ms
 GET /api/financial-records 200 in 42ms
 GET /api/financial-records 200 in 39ms
 GET /financial_management/report 200 in 32ms
 GET /api/financial-records 200 in 36ms
 GET /api/financial-records 200 in 36ms
 GET /financial_management/report 200 in 21ms
 GET /financial_management/add 200 in 40ms
 GET /account_management/admin 200 in 37ms
 GET /api/accounts?role=admin 200 in 29ms
 GET /api/accounts?role=admin 200 in 24ms
 GET /api/accounts/689308eab3b09e635ae9f4c0 200 in 26ms
 GET /api/accounts/689308eab3b09e635ae9f4c0 200 in 22ms
 GET / 200 in 50ms
 GET / 200 in 68ms
 GET /api/auth/me 200 in 42ms
 GET /_next/webpack-hmr 404 in 45ms
 GET / 200 in 74ms
 GET /api/auth/me 200 in 40ms
 GET /_next/webpack-hmr 404 in 42ms
 GET / 200 in 101ms
 GET /_next/webpack-hmr 404 in 63ms
 GET /api/auth/me 200 in 85ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 269ms
 GET / 200 in 109ms
 GET /api/auth/me 401 in 28ms
 GET /login?redirect=%2F 200 in 37ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 228ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 225ms
 GET /_next/webpack-hmr 404 in 53ms
 POST /api/auth/login 401 in 278ms
 GET / 200 in 74ms
 GET /api/auth/me 401 in 29ms
 GET /_next/webpack-hmr 404 in 47ms
 GET /login?redirect=%2F 200 in 19ms
 POST /api/auth/login 200 in 304ms
 GET / 200 in 19ms
 GET / 200 in 17ms
 GET / 200 in 14ms
 GET /attendance 200 in 32ms
 GET /api/attendance/accessible 200 in 38ms
 GET /api/attendance/accessible 200 in 34ms
 GET /attendance/by_name 200 in 30ms
 GET /api/attendance/accessible 200 in 43ms
 GET /api/attendance/accessible 200 in 30ms
 GET /member_management/profile 200 in 35ms
 GET /api/accounts?role=member 200 in 31ms
 GET /api/accounts?role=member 200 in 28ms
 GET /api/attendance/by-member?name=%E6%9E%97%E5%A4%AA&contact=50000003 200 in 30ms
 GET /api/attendance/by-member?name=%E6%9E%97%E5%A4%AA&contact=50000003 200 in 36ms
 GET /trainer_management/profile 200 in 36ms
 GET /api/accounts?role=trainer 200 in 29ms
 GET /api/accounts?role=trainer 200 in 33ms
 GET /api/trainer-profile/689318cbb3b09e635ae9f690 200 in 38ms
 GET /api/activities/by-trainer?trainerId=689318cbb3b09e635ae9f690 200 in 42ms
 GET /api/trainer-profile/689318cbb3b09e635ae9f690 200 in 28ms
 GET /api/activities/by-trainer?trainerId=689318cbb3b09e635ae9f690 200 in 29ms
(node:26478) [MONGOOSE] Warning: Duplicate schema index on {"trainerId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
 GET /financial_management 200 in 48ms
 GET /api/auth/me 200 in 54ms
 GET /_next/webpack-hmr 404 in 53ms
 GET /api/financial-records 200 in 67ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 229ms
 GET /financial_management 200 in 49ms
 GET /api/auth/me 200 in 66ms
 GET /_next/webpack-hmr 404 in 62ms
 GET /api/financial-records 200 in 80ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 252ms
 GET / 200 in 48ms
 GET /api/auth/me 200 in 39ms
 GET /_next/webpack-hmr 404 in 40ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 241ms
 HEAD / 200 in 68ms
 HEAD / 200 in 35ms
 GET /financial_management 200 in 73ms
 GET /api/auth/me 200 in 45ms
 GET /api/financial-records 200 in 63ms
 GET /_next/webpack-hmr 404 in 67ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 246ms
 GET /financial_management/report 200 in 102ms
 GET /api/auth/me 200 in 56ms
 GET /_next/webpack-hmr 404 in 55ms
 GET /api/financial-records 200 in 88ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 247ms
 GET /attendance 200 in 74ms
 GET /api/auth/me 200 in 33ms
 GET /api/attendance/accessible 200 in 45ms
 GET /_next/webpack-hmr 404 in 55ms
 GET /attendance/add 200 in 43ms
 GET /api/activities 200 in 35ms
 GET /api/activities 200 in 33ms
 GET /attendance 200 in 38ms
 GET /api/attendance/accessible 200 in 36ms
 GET /api/attendance/accessible 200 in 38ms
 GET / 200 in 47ms
 GET /financial_management/report 200 in 64ms
 GET /financial_management 200 in 53ms
 GET / 200 in 42ms
 GET / 200 in 39ms
 GET / 200 in 68ms
 GET /api/auth/me 200 in 45ms
 GET /_next/webpack-hmr 404 in 44ms
 GET / 200 in 65ms
 GET /api/auth/me 200 in 45ms
 GET /_next/webpack-hmr 404 in 44ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 247ms
 GET /attendance 200 in 104ms
 GET /_next/webpack-hmr 404 in 4032ms
 GET /api/auth/me 200 in 4281ms
 GET /api/attendance/accessible 200 in 4293ms
 GET /financial_management 200 in 126ms
 GET /_next/webpack-hmr 404 in 45ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 232ms
 GET /api/auth/me 200 in 493ms
 GET /api/financial-records 200 in 566ms
[?25h
